{"version":3,"sources":["../../../src/server/app-render/action-handler.ts"],"names":["handleAction","nodeToWebReadableStream","nodeReadable","process","env","NEXT_RUNTIME","Readable","require","toWeb","ReadableStream","start","controller","on","chunk","enqueue","close","error","Error","formDataFromSearchQueryString","query","searchParams","URLSearchParams","formData","FormData","key","value","append","nodeHeadersToRecord","headers","record","Object","entries","undefined","Array","isArray","join","getForwardedHeaders","req","res","requestHeaders","requestCookies","responseHeaders","getHeaders","rawSetCookies","setCookies","map","setCookie","cookie","split","mergedHeaders","mergedCookies","concat","Headers","fetchIPv4v6","url","init","v6","hostname","fetch","catch","err","code","createRedirectRenderResult","redirectUrl","staticGenerationStore","startsWith","forwardedHeaders","set","RSC","host","proto","incrementalCache","requestProtocol","fetchUrl","URL","headResponse","method","next","internal","get","RSC_CONTENT_TYPE_HEADER","response","setHeader","FlightRenderResult","body","RenderResult","JSON","stringify","ComponentMod","pathname","serverActionsManifest","generateFlight","actionId","ACTION","toLowerCase","contentType","isURLEncodedAction","isMultipartAction","isFetchAction","bound","workerName","serverModuleMap","Proxy","_","id","workers","name","chunks","actionAsyncStorage","actionResult","run","isAction","decodeReply","decodeAction","webRequest","request","action","actionData","reader","getReader","done","read","TextDecoder","decode","decodeReplyFromBusboy","busboy","bb","pipe","UndiciRequest","Request","fakeRequest","duplex","parseBody","actionModId","actionHandler","__next_app_webpack_require__","returnVal","apply","Promise","all","pendingRevalidates","resolve","skipFlight","pathWasRevalidated","isRedirectError","getURLFromRedirectError","statusCode","isNotFoundError","promise","reject","asNotFound"],"mappings":"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"}